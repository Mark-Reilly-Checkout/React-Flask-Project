{"ast":null,"code":"var _jsxFileName = \"/Users/mark.reilly/Documents/react-flask-project/frontend/src/components/ApplePay.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ApplePay = () => {\n  _s();\n  const containerRef = useRef(null);\n  useEffect(() => {\n    // Remove any existing apple-pay-button\n    const existingButton = document.querySelector('apple-pay-button');\n    if (existingButton) {\n      existingButton.remove();\n    }\n\n    // Only load Apple Pay if it's available\n    if (window.ApplePaySession && ApplePaySession.canMakePayments()) {\n      var _containerRef$current;\n      const el = document.createElement('apple-pay-button');\n      el.setAttribute('buttonstyle', 'black');\n      el.setAttribute('type', 'plain');\n      el.setAttribute('locale', 'en-US');\n\n      // Add click listener to start session\n      el.addEventListener('click', async () => {\n        try {\n          const validationURL = 'https://apple-pay-gateway.apple.com/paymentservices/startSession';\n          const sessionResponse = await axios.post('https://localhost:5002/api/apple-pay-session', {\n            validationURL\n          });\n          const paymentRequest = {\n            countryCode: 'US',\n            currencyCode: 'USD',\n            supportedNetworks: ['visa', 'masterCard', 'amex'],\n            merchantCapabilities: ['supports3DS'],\n            total: {\n              label: 'Your Company',\n              amount: '50.00'\n            }\n          };\n          const session = new window.ApplePaySession(3, paymentRequest);\n          session.onvalidatemerchant = event => {\n            session.completeMerchantValidation(sessionResponse.data);\n          };\n          session.onpaymentauthorized = async event => {\n            try {\n              const result = await axios.post('https://localhost:5002/api/apple-pay-payment', {\n                payment: event.payment\n              });\n              if (result.data.success) {\n                session.completePayment(window.ApplePaySession.STATUS_SUCCESS);\n              } else {\n                session.completePayment(window.ApplePaySession.STATUS_FAILURE);\n              }\n            } catch (error) {\n              console.error(\"Payment error:\", error);\n              session.completePayment(window.ApplePaySession.STATUS_FAILURE);\n            }\n          };\n          session.begin();\n        } catch (error) {\n          console.error(\"Apple Pay error:\", error);\n        }\n      });\n      (_containerRef$current = containerRef.current) === null || _containerRef$current === void 0 ? void 0 : _containerRef$current.appendChild(el);\n    } else {\n      console.log('Apple Pay not available in this browser.');\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n          apple-pay-button {\n            --apple-pay-button-width: 200px;\n            --apple-pay-button-height: 30px;\n            --apple-pay-button-border-radius: 8px;\n            --apple-pay-button-padding: 0px;\n            --apple-pay-button-box-sizing: border-box;\n            display: block;\n            margin: 0 auto;\n            opacity: 0;\n            transform: translateY(20px);\n            animation: fadeInUp 0.6s ease-out forwards;\n            transition: transform 0.3s ease, box-shadow 0.3s ease;\n          }\n\n          apple-pay-button:hover {\n            transform: translateY(15px) scale(1.05);\n            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);\n          }\n\n          @keyframes fadeInUp {\n            to {\n              opacity: 1;\n              transform: translateY(0);\n            }\n          }\n        `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-center\",\n      children: \"Apple Pay\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      className: \"text-center\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n};\n_s(ApplePay, \"8puyVO4ts1RhCfXUmci3vLI3Njw=\");\n_c = ApplePay;\nexport default ApplePay;\nvar _c;\n$RefreshReg$(_c, \"ApplePay\");","map":{"version":3,"names":["React","useEffect","useRef","axios","jsxDEV","_jsxDEV","ApplePay","_s","containerRef","existingButton","document","querySelector","remove","window","ApplePaySession","canMakePayments","_containerRef$current","el","createElement","setAttribute","addEventListener","validationURL","sessionResponse","post","paymentRequest","countryCode","currencyCode","supportedNetworks","merchantCapabilities","total","label","amount","session","onvalidatemerchant","event","completeMerchantValidation","data","onpaymentauthorized","result","payment","success","completePayment","STATUS_SUCCESS","STATUS_FAILURE","error","console","begin","current","appendChild","log","children","fileName","_jsxFileName","lineNumber","columnNumber","className","ref","_c","$RefreshReg$"],"sources":["/Users/mark.reilly/Documents/react-flask-project/frontend/src/components/ApplePay.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport axios from 'axios';\n\nconst ApplePay = () => {\n  const containerRef = useRef(null);\n\n  useEffect(() => {\n    // Remove any existing apple-pay-button\n    const existingButton = document.querySelector('apple-pay-button');\n    if (existingButton) {\n      existingButton.remove();\n    }\n\n    // Only load Apple Pay if it's available\n    if (window.ApplePaySession && ApplePaySession.canMakePayments()) {\n      const el = document.createElement('apple-pay-button');\n      el.setAttribute('buttonstyle', 'black');\n      el.setAttribute('type', 'plain');\n      el.setAttribute('locale', 'en-US');\n\n      // Add click listener to start session\n      el.addEventListener('click', async () => {\n        try {\n          const validationURL = 'https://apple-pay-gateway.apple.com/paymentservices/startSession';\n\n          const sessionResponse = await axios.post('https://localhost:5002/api/apple-pay-session', {\n            validationURL\n          });\n\n          const paymentRequest = {\n            countryCode: 'US',\n            currencyCode: 'USD',\n            supportedNetworks: ['visa', 'masterCard', 'amex'],\n            merchantCapabilities: ['supports3DS'],\n            total: {\n              label: 'Your Company',\n              amount: '50.00'\n            }\n          };\n\n          const session = new window.ApplePaySession(3, paymentRequest);\n\n          session.onvalidatemerchant = (event) => {\n            session.completeMerchantValidation(sessionResponse.data);\n          };\n\n          session.onpaymentauthorized = async (event) => {\n            try {\n              const result = await axios.post('https://localhost:5002/api/apple-pay-payment', {\n                payment: event.payment\n              });\n\n              if (result.data.success) {\n                session.completePayment(window.ApplePaySession.STATUS_SUCCESS);\n              } else {\n                session.completePayment(window.ApplePaySession.STATUS_FAILURE);\n              }\n            } catch (error) {\n              console.error(\"Payment error:\", error);\n              session.completePayment(window.ApplePaySession.STATUS_FAILURE);\n            }\n          };\n\n          session.begin();\n        } catch (error) {\n          console.error(\"Apple Pay error:\", error);\n        }\n      });\n\n      containerRef.current?.appendChild(el);\n    } else {\n      console.log('Apple Pay not available in this browser.');\n    }\n  }, []);\n\n  return (\n    <div>\n      <style>\n        {`\n          apple-pay-button {\n            --apple-pay-button-width: 200px;\n            --apple-pay-button-height: 30px;\n            --apple-pay-button-border-radius: 8px;\n            --apple-pay-button-padding: 0px;\n            --apple-pay-button-box-sizing: border-box;\n            display: block;\n            margin: 0 auto;\n            opacity: 0;\n            transform: translateY(20px);\n            animation: fadeInUp 0.6s ease-out forwards;\n            transition: transform 0.3s ease, box-shadow 0.3s ease;\n          }\n\n          apple-pay-button:hover {\n            transform: translateY(15px) scale(1.05);\n            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);\n          }\n\n          @keyframes fadeInUp {\n            to {\n              opacity: 1;\n              transform: translateY(0);\n            }\n          }\n        `}\n      </style>\n\n      <h1 className=\"text-center\">Apple Pay</h1>\n      <div ref={containerRef} className=\"text-center\"></div>\n    </div>\n  );\n};\n\nexport default ApplePay;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}