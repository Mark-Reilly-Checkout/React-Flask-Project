{"version":3,"file":"index.js","sources":["../src/types.ts","../src/index.ts"],"sourcesContent":["type Prettify<T> = {\n  [K in keyof T]: T[K];\n  // eslint-disable-next-line @typescript-eslint/ban-types\n} & {};\n\n/**\n * Enumeration of the possible environments.\n * @enum {string}\n */\nexport enum Environment {\n  Production = 'production',\n  Sandbox = 'sandbox',\n}\n\n/**\n * Union type representing the environment values as strings.\n */\nexport type EnvironmentUnion = `${Environment}`;\n\n/**\n * Translation keys for various messages used in the application.\n * @interface {Object} Translations\n */\nexport type Translations = {\n  /**\n   * The call to action message to capture the customer's full name.\n   */\n  'bancontact.holder_name': string;\n\n  /**\n   * The label for the card option.\n   */\n  card: string;\n\n  /**\n   * Label for cardholder name input.\n   */\n  'card.card_holder_name': string;\n\n  /**\n   * Label for the card number input.\n   */\n  'card.card_number': string;\n\n  /**\n   * Error message displayed when the card number is incomplete.\n   */\n  'card.card_number.invalid': string;\n\n  /**\n   * Error message displayed when the card number comes from an unsupported card scheme.\n   */\n  'card.card_number.not_supported': string;\n\n  /**\n   * Label for card expiry date input.\n   */\n  'card.expiry_date': string;\n\n  /**\n   * Error message displayed when the card expiry date is invalid.\n   */\n  'card.expiry_date.invalid': string;\n\n  /**\n   * Message describing the format for card expiry month input.\n   */\n  'card.expiry_date.placeholder.month': string;\n\n  /**\n   * Message describing the format for card expiry year input.\n   */\n  'card.expiry_date.placeholder.year': string;\n\n  /**\n   * Label for preferred scheme selection.\n   */\n  'card.preferred_scheme.cta': string;\n\n  /**\n   * Message prompting the customer to select their preferred scheme.\n   */\n  'card.preferred_scheme.description': string;\n\n  /**\n   * Label for card security code (CVV) input.\n   */\n  'card.security_code': string;\n\n  /**\n   * Error message displayed when the security code (CVV) is incomplete.\n   */\n  'card.security_code.invalid': string;\n\n  /**\n   * Message describing the format for card security code input.\n   */\n  'card.security_code.placeholder': string;\n\n  /**\n   * Validation message displayed when the customer provides an invalid email.\n   */\n  'form.email.invalid': string;\n\n  /**\n   * Placeholder message displayed in the empty email input field.\n   */\n  'form.email.placeholder': string;\n\n  /**\n   * Placeholder message displayed in the empty full name input field.\n   */\n  'form.full_name.placeholder': string;\n\n  /**\n   * Validation message displayed when the customer inputs a value shorter than the required length.\n   */\n  'form.greater_than': string;\n\n  /**\n   * Validation message displayed when the customer inputs a value longer than the required length.\n   */\n  'form.less_than': string;\n\n  /**\n   * Validation message displayed when the customer leaves a required field blank.\n   */\n  'form.required': string;\n\n  /**\n   * Label for bank selection.\n   */\n  'ideal.bank': string;\n\n  /**\n   * Label for full name input.\n   */\n  'multibanco.holder_name': string;\n\n  /**\n   * Label for email input.\n   */\n  'p24.holder_email': string;\n\n  /**\n   * Label for full name input.\n   */\n  'p24.holder_name': string;\n\n  /**\n   * The call to action displayed on the pay button.\n   */\n  'pay_button.pay': string;\n\n  /**\n   * The payment method-specific call to action displayed on the pay button.\n   */\n  'pay_button.pay_with': string;\n\n  /**\n   * Message displayed when the payment is completed.\n   */\n  'pay_button.payment_complete': string;\n\n  /**\n   * Error message displayed if the payment attempt fails.\n   */\n  'pay_button.payment_failed': string;\n\n  /**\n   * Message displayed while the payment is processing.\n   */\n  'pay_button.payment_processing': string;\n\n  /**\n   * Message displayed when the customer is about to be redirected to complete their payment.\n   */\n  'pay_button.redirect_cta': string;\n\n  /**\n   * Error message displayed when the customer has provided invalid payment details.\n   */\n  'payment.declined.invalid_customer_data': string;\n\n  /**\n   * Error message displayed when the PaymentSession data provided is invalid for the chosen payment method – this exists to cover edge-cases and should not occur.\n   */\n  'payment.declined.invalid_payment_session_data': string;\n\n  /**\n   * Error message displayed when the merchant is misconfigured for the chosen payment method.\n   */\n  'payment.declined.merchant_misconfiguration': string;\n\n  /**\n   * Error message displayed when the customer does not hold sufficient funds to complete the transaction with their chosen payment method.\n   */\n  'payment.declined.not_enough_funds': string;\n\n  /**\n   * Fallback message displayed when the chosen payment method declines the transaction.\n   */\n  'payment.declined.try_again': string;\n};\n\n/**\n * Type representing custom translations for different locales.\n * @interface CustomTranslations\n * @property {Partial<Translations>} [locale] - Custom translations for a specific locale (examples `en` or `en-GB`).\n */\nexport type CustomTranslations = {\n  /**\n   * Custom translations for a specific locale (examples `en` or `en-GB`).\n   */\n\n  [locale: string]: Partial<Translations>;\n};\n\n/**\n * Enumeration of the supported component names.\n * @enum {string}\n */\nexport enum ComponentName {\n  Applepay = 'applepay',\n  Bancontact = 'bancontact',\n  Card = 'card',\n  Eps = 'eps',\n  Giropay = 'giropay',\n  Googlepay = 'googlepay',\n  Ideal = 'ideal',\n  Knet = 'knet',\n  Multibanco = 'multibanco',\n  P24 = 'p24',\n  Paypal = 'paypal',\n  Sofort = 'sofort',\n  Flow = 'flow',\n}\n\n/**\n * Union type representing the component name values as strings.\n */\nexport type ComponentNameUnion = `${ComponentName}`;\n\n/**\n * Interface representing a component in the checkout flow.\n * @interface Component\n */\nexport interface Component {\n  /** The type of the component. */\n  type: ComponentNameUnion;\n  /**\n   * Submits a Component, if you require your own pay button.\n   * Not available for digital wallets, including Apple Pay and Google Pay.\n   *\n   * @return {Component} The Component instance.\n   */\n\n  submit(): void;\n  /**\n   * Checks if the Component has captured all details from the\n   * customer and can be submitted.\n   *\n   * @return {boolean} Validity of the Component for submission.\n   */\n\n  isValid(): boolean;\n  /**\n   * Checks if the Component can be rendered.\n   * Call this before mounting the Component.\n   *\n   * @return {Promise<boolean>}\n   */\n\n  isAvailable(): Promise<boolean>;\n  /**\n   * Mounts a Component to a page.\n   * You can provide either:\n   * - an Element Selector\n   *   (https://developer.mozilla.org/en-US/docs/Web/API/Element)\n   * - a DOM Element Object\n   *   (https://developer.mozilla.org/en-US/docs/Web/API/Document_object_model/Locating_DOM_elements_using_selectors)\n   *\n   * @param {string} element - the Element Selector or DOM Element object to mount to\n   * @return {Component}\n   */\n\n  mount(element: string | Element): Component;\n  /**\n   * Unmounts a Component from the page.\n   * This stops the component rendering, and removes all life-cycles\n   * from the browser.\n   *\n   * @return {Component}\n   */\n\n  unmount(): Component;\n\n  /** The display name of the component. */\n  name: string;\n}\n\n/**\n * Enumeration of possible reasons for payment decline.\n * @enum {string}\n */\nexport enum PaymentDeclineReason {\n  NotEnoughFunds = 'not_enough_funds',\n  InvalidPaymentSessionData = 'invalid_payment_session_data',\n  InvalidCustomerData = 'invalid_customer_data',\n  MerchantMisconfiguration = 'merchant_misconfiguration',\n  TryAgain = 'try_again',\n}\n\n/**\n * Response type for a successful payment session.\n * @interface PayPaymentSessionSuccessfulResponse\n */\nexport type PayPaymentSessionSuccessfulResponse = {\n  /**\n   * The ID of the payment session.\n   */\n\n  id: string;\n  /**\n   * The status of the payment session, always 'Approved'.\n   */\n\n  status: 'Approved';\n  /**\n   * The component type associated with the payment session.\n   */\n\n  type: ComponentNameUnion;\n};\n\n/**\n * Enumeration of possible types of checkout errors.\n * @enum {string}\n */\nexport enum CheckoutErrorType {\n  Integration = 'Integration',\n  Request = 'Request',\n  PaymentMethod = 'PaymentMethod',\n  Submit = 'Submit',\n}\n\n/**\n * Enumeration of error codes for payment method errors.\n * @enum {string}\n */\nexport enum CheckoutPaymentMethodErrorCode {\n  PaymentMethodAttemptFailed = 'payment_method_attempt_failed',\n}\n\n/**\n * Enumeration of error codes for integration errors.\n * @enum {string}\n */\nexport enum CheckoutIntegrationErrorCode {\n  BrowserEnvironmentRequired = 'browser_environment_required',\n  CallbackResultInvalid = 'callback_result_invalid',\n  ComponentAlreadyMounted = 'component_already_mounted',\n  ComponentIsAvailableNotChecked = 'component_is_available_not_checked',\n  ComponentNotSupported = 'component_not_supported',\n  ElementNotFound = 'element_not_found',\n  PaymentSessionInvalid = 'payment_session_invalid',\n}\n\n/**\n * Enumeration of error codes for request errors.\n * @enum {string}\n */\nexport enum CheckoutRequestErrorCode {\n  PaymentRequestDeclined = 'payment_request_declined',\n  PaymentRequestFailed = 'payment_request_failed',\n}\n\n/**\n * Enumeration of error codes for submit errors.\n * @enum {string}\n */\nexport enum CheckoutSubmitErrorCode {\n  ComponentInvalid = 'component_invalid',\n}\n\n/**\n * Base type for checkout errors.\n * @interface CheckoutErrorBase\n */\ntype CheckoutErrorBase = {\n  /**\n   * The name of the error.\n   */\n\n  name: 'CheckoutError';\n  /**\n   * The error message. This is a human readable error message and can change, thus avoid relying on it.\n   */\n\n  message: string;\n};\n\n/**\n * Type for integration errors.\n * @interface CheckoutIntegrationError\n */\nexport type CheckoutIntegrationError = Prettify<\n  CheckoutErrorBase & {\n    /**\n     * The type of the error.\n     */\n    type: `${CheckoutErrorType.Integration}`;\n    /**\n     * The specific integration error code.\n     */\n\n    code: CheckoutIntegrationErrorCode;\n    /**\n     * Additional details about the error.\n     */\n\n    details: {\n      /**\n       * The unique identifier of the browser session that created the Component.\n       */\n\n      browserSessionId: string;\n      /**\n       * The Element selector or DOM object that caused the mounting error.\n       *\n       * This property is only returned for errors with an `element_not_found` error code.\n       */\n\n      element?: string | Element;\n      /**\n       * The unique identifier of the provided payment session response.\n       */\n\n      paymentSessionId?: string;\n      /**\n       * The name of the payment method used for the payment.\n       */\n      type?: ComponentNameUnion;\n    };\n  }\n>;\n\n/**\n * Type for request errors.\n * @interface CheckoutRequestError\n */\nexport type CheckoutRequestError = Prettify<\n  CheckoutErrorBase & {\n    /**\n     * The type of the error.\n     */\n\n    type: `${CheckoutErrorType.Request}`;\n    /**\n     * The specific request error code.\n     */\n\n    code: CheckoutRequestErrorCode | CheckoutPaymentMethodErrorCode;\n    /**\n     * Additional details about the error.\n     */\n\n    details: {\n      /**\n       * The unique identifier of the browser session that created the Component.\n       */\n\n      browserSessionId: string;\n      /**\n       * The payment ID.\n       */\n\n      paymentId?: string;\n      /**\n       * The unique identifier of the provided payment session response.\n       */\n\n      paymentSessionId: string;\n\n      /**\n       * Additional error codes returned from the network request.\n       */\n\n      requestErrorCodes?: (PaymentDeclineReason | string)[];\n\n      /**\n       * The unique identifier for the network request.\n       */\n\n      requestId?: string;\n      /**\n       * The [HTTP response status code](https://www.checkout.com/docs/developer-resources/codes/api-response-codes#HTTP_status_codes) for the network request.\n       */\n\n      status?: number;\n      /**\n       * The name of the payment method used for the payment.\n       */\n\n      type?: ComponentNameUnion;\n    };\n  }\n>;\n\n/**\n * Type for payment method errors.\n * @interface CheckoutPaymentMethodError\n */\nexport type CheckoutPaymentMethodError = Prettify<\n  CheckoutErrorBase & {\n    /**\n     * The type of the error.\n     */\n\n    type: `${CheckoutErrorType.PaymentMethod}`;\n    /**\n     * The specific payment method error code.\n     */\n\n    code: CheckoutPaymentMethodErrorCode;\n    /**\n     * Additional details about the error.\n     */\n\n    details: {\n      /**\n       * The unique identifier of the browser session that created the Component.\n       */\n\n      browserSessionId: string;\n      /**\n       * The unique identifier of the provided payment session response.\n       */\n\n      paymentSessionId: string;\n      /**\n       * The name of the payment method used for the payment.\n       */\n\n      type: ComponentNameUnion;\n    };\n  }\n>;\n\n/**\n * Type for submit errors.\n * @interface CheckoutSubmitError\n */\nexport type CheckoutSubmitError = Prettify<\n  CheckoutErrorBase & {\n    /**\n     * The type of the error.\n     */\n\n    type: `${CheckoutErrorType.Submit}`;\n\n    /**\n     * The specific payment method error code.\n     */\n\n    code: CheckoutSubmitErrorCode | CheckoutPaymentMethodErrorCode;\n    /**\n     * The specific submit error code.\n     */\n\n    details: {\n      /**\n       * The unique identifier of the browser session that created the Component.\n       */\n\n      browserSessionId: string;\n      /**\n       * The unique identifier of the provided payment session response.\n       */\n\n      paymentSessionId: string;\n      /**\n       * The name of the payment method used for the payment.\n       */\n\n      type: ComponentNameUnion;\n    };\n  }\n>;\n\n/**\n * Union type representing any checkout error.\n * @typedef {CheckoutIntegrationError | CheckoutRequestError | CheckoutPaymentMethodError | CheckoutSubmitError} CheckoutError\n */\nexport type CheckoutError =\n  | CheckoutIntegrationError\n  | CheckoutRequestError\n  | CheckoutPaymentMethodError\n  | CheckoutSubmitError;\n\nexport type HandleClickResult = {\n  continue: boolean;\n};\n\n/**\n * Type representing supported dimensions which can be a string or number.\n */\nexport type SupportedDimensions = string | number;\n\n/**\n * Interface representing font properties.\n * @interface Font\n */\nexport interface Font {\n  /** The font family name. */\n  fontFamily: string;\n  /** The font size. */\n  fontSize: SupportedDimensions;\n  /** The line height. */\n  lineHeight: SupportedDimensions;\n  /** The font weight. */\n  fontWeight: number;\n  /** The letter spacing. */\n  letterSpacing: SupportedDimensions;\n}\n\n/**\n * Type representing color tokens.\n * @interface ColorTokens\n */\nexport type ColorTokens = {\n  /** Primary color. */\n  colorPrimary: string;\n  /** Secondary color. */\n  colorSecondary: string;\n  /** Disabled state color. */\n  colorDisabled: string;\n  /** Error state color. */\n  colorError: string;\n  /** Inverse color. */\n  colorInverse: string;\n  /** Action color. */\n  colorAction: string;\n  /** Success state color. */\n  colorSuccess: string;\n  /** Background color. */\n  colorBackground: string;\n  /** Form background color. */\n  colorFormBackground: string;\n  /** Border color. */\n  colorBorder: string;\n  /** Form border color. */\n  colorFormBorder: string;\n  /** Outline color. */\n  colorOutline: string;\n};\n\n/**\n * Type representing border radius which is a tuple of supported dimensions.\n */\nexport type BorderRadius = [SupportedDimensions, SupportedDimensions];\n\n/**\n * Enumeration of font names.\n * @enum {string}\n */\nexport enum FontName {\n  Subheading = 'subheading',\n  Footnote = 'footnote',\n  Button = 'button',\n  Input = 'input',\n  Label = 'label',\n}\n\n/**\n * Type representing design tokens.\n * @interface DesignTokens\n */\nexport type DesignTokens = Prettify<\n  {\n    /**\n     * Subheading font properties.\n     */\n\n    subheading: Partial<Font>;\n    /**\n     * Footnote font properties.\n     */\n\n    footnote: Partial<Font>;\n    /**\n     * Button font properties.\n     */\n\n    button: Partial<Font>;\n    /**\n     * Input font properties.\n     */\n\n    input: Partial<Font>;\n    /**\n     * Label font properties.\n     */\n\n    label: Partial<Font>;\n\n    /**\n     * Border radius properties.\n     */\n\n    borderRadius: BorderRadius;\n\n    /**\n     * Border width.\n     */\n\n    borderWidth: string;\n\n    /**\n     * Focus outline width.\n     */\n\n    focusOutlineWidth: string;\n  } & ColorTokens\n>;\n\n/**\n * Type representing partial design tokens.\n */\nexport type PartialDesignTokens = Partial<DesignTokens>;\n\ntype SharedComponentOptions = {\n  /**\n   * Fired when a Component is initialized and ready\n   * for the customer to interact.\n   *\n   * Component is the instance that fired the event.\n   */\n\n  onReady?: (component: Component) => void;\n\n  /**\n   * Fired when a Component changes after a\n   * customer interaction.\n   *\n   * Component is the instance that fired the event.\n   */\n\n  onChange?: (component: Component) => void;\n\n  /**\n   * Fired when a Component changes after a\n   * customer interaction.\n   *\n   * Component is the instance that fired the event.\n   */\n\n  onSubmit?: (component: Component) => void;\n\n  /**\n   * Fired when the payment has been completed synchronously.\n   * This event will not be fired if the payment requires\n   * asynchronous action. For example, 3DS authentication.\n   *\n   * Component is the instance that fired the event.\n   *\n   * PaymentResponse contains information on the successful payment:\n   *   - {string} id - a unique identifier for the payment\n   *   - {string} status - the payment status – will always be 'Approved'\n   *   - {string} type - the name of the payment method that was used for the payment\n   */\n\n  onPaymentCompleted?: (component: Component, payment: PayPaymentSessionSuccessfulResponse) => void;\n\n  /**\n   * Fired when an error occurs.\n   *\n   * Component is the instance that fired the event.\n   *\n   * See the CheckoutError reference for more information.\n   */\n\n  onError?: (component: Component, error: CheckoutError) => void;\n};\n\n/**\n * Options for configuring a payment component.\n * @interface ComponentOptions\n */\nexport type ComponentOptions = Prettify<\n  SharedComponentOptions & {\n    /**\n     * Flag to show or hide the pay button.\n     */\n\n    showPayButton?: boolean;\n  }\n>;\n\n/**\n * Options for configuring the card component.\n * @interface CardComponentOptions\n */\nexport type CardComponentOptions = Prettify<\n  ComponentOptions & {\n    /**\n     * Object that can be used to provide data for fields.\n     */\n\n    data?: {\n      /**\n       * provide the card holder name.\n       */\n\n      cardholderName?: string;\n    };\n\n    /**\n     * The display state for the card holder name. If `top` or `bottom` the field is required, `hidden` will remove the field.\n     */\n\n    displayCardholderName?: 'top' | 'bottom' | 'hidden';\n  }\n>;\n\n/**\n * Options for configuring a wallet payment component.\n * @interface WalletComponentOptions\n */\nexport type WalletComponentOptions = Prettify<\n  SharedComponentOptions & {\n    /**\n     * Triggered when a wallet payment button is clicked.\n     * For example, Apple Pay, Google Pay, or PayPal.\n     *\n     * You can use this to perform checks before\n     * beginning the payment process.\n     *\n     * Component is the instance that triggered the callback.\n     */\n\n    handleClick?: (component: Component) => Promise<HandleClickResult> | HandleClickResult;\n  }\n>;\n\n/**\n * Options for configuring a flow payment component.\n * @interface FlowComponentOptions\n */\nexport type FlowComponentOptions = Prettify<ComponentOptions & WalletComponentOptions>;\n\n/**\n * Options for configuring any type of payment component.\n * @interface AllComponentOptions\n */\nexport type AllComponentOptions = Prettify<ComponentOptions & WalletComponentOptions>;\n\n/**\n * Response type for a payment session.\n * @interface PaymentSessionResponse\n */\n\nexport type PaymentSessionResponse = Record<string, unknown>;\n\n/**\n * Options map for different component names.\n * @interface OptionsMap\n */\ntype ComponentOptionsByComponentName = {\n  /**\n   * Options for ApplePay.\n   */\n\n  applepay: WalletComponentOptions;\n  /**\n   * Options for Bancontact.\n   */\n\n  bancontact: ComponentOptions;\n  /**\n   * Options for Bancontact.\n   */\n\n  card: CardComponentOptions;\n  /**\n   * Options for EPS.\n   */\n\n  eps: ComponentOptions;\n\n  /**\n   * Options for Giropay.\n   */\n  giropay: ComponentOptions;\n\n  /**\n   * Options for GooglePay.\n   */\n  googlepay: WalletComponentOptions;\n\n  /**\n   * Options for iDEAL.\n   */\n  ideal: ComponentOptions;\n\n  /**\n   * Options for KNET.\n   */\n  knet: ComponentOptions;\n\n  /**\n   * Options for Multibanco.\n   */\n  multibanco: ComponentOptions;\n\n  /**\n   * Options for Przelewy24.\n   */\n  p24: ComponentOptions;\n\n  /**\n   * Options for PayPal.\n   */\n  paypal: WalletComponentOptions;\n\n  /**\n   * Options for Sofort.\n   */\n  sofort: WalletComponentOptions;\n\n  /**\n   * Options for Flow.\n   */\n  flow: FlowComponentOptions;\n};\n\n/**\n * Configuration options for the checkout components.\n * @interface Options\n */\nexport type Options = Prettify<\n  {\n    /**\n     * The public API key.\n     */\n\n    publicKey: string;\n    /**\n     * The public API key.\n     */\n\n    paymentSession: PaymentSessionResponse;\n    /**\n     * The payment session response.\n     */\n\n    locale?: string;\n    /**\n     * The locale to be used.\n     */\n\n    environment?: EnvironmentUnion;\n    /**\n     * The public API key.\n     */\n\n    appearance?: PartialDesignTokens;\n    /**\n     * The custom translations.\n     */\n\n    translations?: CustomTranslations;\n    /**\n     * The component-specific options.\n     */\n\n    componentOptions?: ComponentOptionsByComponentName;\n  } & AllComponentOptions\n>;\n\n/**\n * Interface for creating checkout web components.\n * @interface CheckoutWebComponents\n */\nexport interface CheckoutWebComponents {\n  /**\n   * Creates a new component.\n   * @param {ComponentNameUnion} name - The name of the component.\n   * @param {ComponentOptions[T]} [options] - The options for the component.\n   * @returns {Component} The created component.\n   */\n  create<T extends ComponentNameUnion>(\n    /**\n     * The name of the component.\n     */\n\n    name: T,\n    /**\n     * The options for the component.\n     */\n\n    options?: ComponentOptionsByComponentName[T]\n  ): Component;\n}\n\n/**\n * Interface for initializing CheckoutWebComponents.\n * @interface WindowCheckoutWebComponents\n */\nexport interface WindowCheckoutWebComponents {\n  /**\n   * Initializes the CheckoutWebComponents.\n   * @param {Options} [options] - The options for the components.\n   * @returns {CheckoutWebComponents} The initialized CheckoutWebComponents.\n   */\n  (options?: Options): CheckoutWebComponents;\n}\n\n/**\n * Loads the checkout web components.\n * @param {Options} options - The options for loading the components.\n * @returns {Promise<CheckoutWebComponents>} A promise that resolves to the loaded checkout web components.\n */\nexport type LoadCheckoutWebComponents = (options: Options) => Promise<CheckoutWebComponents>;\n","import { LoadCheckoutWebComponents, WindowCheckoutWebComponents } from './types';\n\nexport * from './types';\nexport const CDN_URL = 'https://checkout-web-components.checkout.com/index.js';\n\nconst THIRTY_SECONDS = 30_000;\n\nexport enum CheckoutLoaderErrorType {\n  Integration = 'Integration',\n}\n\nexport enum CheckoutLoaderIntegrationErrorCode {\n  BrowserEnvironmentRequired = 'browser_environment_required',\n  CheckoutWebComponentInstanceNotOnWindow = 'checkout_web_component_instance_not_on_window',\n  ScriptFailed = 'script_failed',\n  ScriptTimedOut = 'script_timed_out',\n}\n\ntype CheckoutLoaderErrorOptions = {\n  type: CheckoutLoaderErrorType;\n  code: CheckoutLoaderIntegrationErrorCode;\n  message: string;\n};\n\nexport class CheckoutLoaderError extends Error {\n  public type: CheckoutLoaderErrorType;\n  public code: CheckoutLoaderIntegrationErrorCode;\n\n  constructor({ type, message, code }: CheckoutLoaderErrorOptions) {\n    super(`[${type}]: ${message} [${code}]`);\n\n    Object.setPrototypeOf(this, CheckoutLoaderError.prototype);\n\n    this.type = type;\n    this.code = code;\n    this.name = 'CheckoutLoaderError';\n  }\n}\n\n// Create a script tag with the CDN URL and inject it into the head of the document.\nconst createScript = (url: string) => {\n  const existingScripts = document.querySelectorAll<HTMLScriptElement>(`script[src^=\"${CDN_URL}\"]`);\n\n  if (existingScripts.length > 0) {\n    // if the scripts already exist, remove them and create a new one.\n    for (let i = 0; i < existingScripts.length; i++) {\n      const script = existingScripts[i];\n\n      script.remove();\n    }\n  }\n\n  const script = document.createElement('script');\n  script.src = url;\n  script.async = true;\n\n  document.head.appendChild(script);\n\n  return script;\n};\n\nconst waitForScriptLoad = async (script: HTMLScriptElement) => {\n  return new Promise<WindowCheckoutWebComponents>((resolve, reject) => {\n    script.addEventListener('load', () => {\n      if (window.CheckoutWebComponents) {\n        resolve(window.CheckoutWebComponents);\n      } else {\n        reject(\n          new CheckoutLoaderError({\n            type: CheckoutLoaderErrorType.Integration,\n            message: \"CheckoutWebComponents loaded but window.CheckoutWebComponents isn't present\",\n            code: CheckoutLoaderIntegrationErrorCode.CheckoutWebComponentInstanceNotOnWindow,\n          })\n        );\n      }\n    });\n\n    script.addEventListener('error', () => {\n      reject(\n        new CheckoutLoaderError({\n          type: CheckoutLoaderErrorType.Integration,\n          message: 'CheckoutWebComponents did not load due to script failing',\n          code: CheckoutLoaderIntegrationErrorCode.ScriptFailed,\n        })\n      );\n    });\n\n    setTimeout(() => {\n      reject(\n        new CheckoutLoaderError({\n          type: CheckoutLoaderErrorType.Integration,\n          message: 'CheckoutWebComponents did not load due to script timing out',\n          code: CheckoutLoaderIntegrationErrorCode.ScriptTimedOut,\n        })\n      );\n    }, THIRTY_SECONDS);\n  });\n};\n\n/**\n * Loads the checkout web components.\n * @throws {CheckoutLoaderError}\n */\nexport const loadCheckoutWebComponents: LoadCheckoutWebComponents = async (options) => {\n  if (typeof window === 'undefined' || typeof document === 'undefined') {\n    throw new CheckoutLoaderError({\n      type: CheckoutLoaderErrorType.Integration,\n      message: 'CheckoutWebComponents can only run in a browser environment',\n      code: CheckoutLoaderIntegrationErrorCode.BrowserEnvironmentRequired,\n    });\n  }\n\n  // if the script is already loaded, return the CheckoutWebComponents from the window object.\n  if (window.CheckoutWebComponents) {\n    return window.CheckoutWebComponents(options);\n  }\n\n  const script = createScript(CDN_URL);\n\n  const CheckoutWebComponents = await waitForScriptLoad(script);\n\n  return CheckoutWebComponents(options);\n};\n"],"names":["Environment","ComponentName","PaymentDeclineReason","CheckoutErrorType","CheckoutPaymentMethodErrorCode","CheckoutIntegrationErrorCode","CheckoutRequestErrorCode","CheckoutSubmitErrorCode","FontName","CDN_URL","CheckoutLoaderErrorType","CheckoutLoaderIntegrationErrorCode","CheckoutLoaderError","Error","constructor","type","message","code","super","_defineProperty","this","Object","setPrototypeOf","prototype","name","async","window","document","Integration","BrowserEnvironmentRequired","CheckoutWebComponents","options","script","url","existingScripts","querySelectorAll","length","i","remove","createElement","src","head","appendChild","createScript","Promise","resolve","reject","addEventListener","CheckoutWebComponentInstanceNotOnWindow","ScriptFailed","setTimeout","ScriptTimedOut","waitForScriptLoad"],"mappings":"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"}